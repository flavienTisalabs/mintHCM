import{l as _,z as m,E as c,e as v,a as b,n as V,w as x,B as y,_ as g}from"./index.af03a0f5.js";const B=_({__name:"relate.edit",props:{defs:{},label:{},modelValue:{},data:{}},emits:["update:modelValue"],setup(i,{emit:u}){const e=i,p=u,l=m(e.data.bean[e.defs.id_name]?[{id:e.data.bean[e.defs.id_name],name:e.modelValue}]:[]);c(()=>{o()});const d=m(e.data.bean[e.defs.id_name]),n=v({get(){return d.value},set(a){e.data.bean[e.defs.id_name]=a,d.value=a,p("update:modelValue",[e.defs.id_name])}});async function o(){var t,s;const a=await b.post(`api/${e.defs.module}`,{offset:0});(s=(t=a.data)==null?void 0:t.results)!=null&&s.length&&(l.value=a.data.results.sort((r,f)=>r.name.localeCompare(f.name,"pl")))}return(a,t)=>(V(),x(y,{items:l.value,label:e.label,variant:"outlined",density:"compact","hide-details":"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),"item-value":"id","item-title":"name",onInput:t[1]||(t[1]=s=>o(s,a.index))},null,8,["items","label","modelValue"]))}});const k=g(B,[["__scopeId","data-v-3f5328f0"]]);export{k as default};
